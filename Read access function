CREATE OR REPLACE FUNCTION check_read_access(emp_id IN NUMBER) RETURN BOOLEAN IS
    role_name EMP_ROLES.ROLE_NAME%TYPE;
BEGIN
    SELECT r.ROLE_NAME
    INTO role_name
    FROM EMP_ROLE_ASSIGNMENTS ra
    JOIN EMP_ROLES r ON ra.ROLE_ID = r.ROLE_ID
    WHERE ra.EMP_ID = emp_id;

    IF role_name IN ('read') THEN
        RETURN TRUE;
    ELSE
        RETURN FALSE;
    END IF;
EXCEPTION
    WHEN OTHERS THEN
        RETURN FALSE;
END;
/
